#!/usr/bin/env zsh

DIR=$(pwd)

ignored_file() {
  for f in "^\.$" "^\.\.$" "^\.git(modules)?$" "\.swp$"; do
    [[ "$1" =~ $f ]] && return 0
  done
  return 1
}

for i in .*; do
    ignored_file "$i" && continue
    source="${DIR}/$i"
    target="${HOME}/$i"
    ([ ! -e "${target}" ] || (printf "\r%-$(expr $(tput cols) - 1)s" "Overwrite ${target}? Y/N" && [ "$(read -eq)" = "y" ] && rm -r "${target}")) && ln -s "${source}" "${target}" && echo "\r${source} -> ${target}"
done
